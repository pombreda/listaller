<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Listaller.ent">
%BOOK_ENTITIES;
]>

<section id="sect-Listaller-Specs-DepTypes">
	<title>Dependency Definitions</title>
	<para>Description how Listaller gets information about software dependencies and how the dependency-data is handled internally.</para>

	<section id="spec-deptypes-rationale">
		<title>Rationale</title>

		<para>
			Listaller distinguishes between so-called <emphasis>Framework</emphasis>-dependencies and <emphasis>Module</emphasis>-dependencies to simplify dependency-solving and to reflect the
			organization of packages on a Linux system.
		</para>
		<para>
			While frameworks are provided by the distributor or project upstream and are hard-wired into the system, Modules can be installed by Listaller from 3rd-party sources.
		</para>
		<para>
			In an ideal world, packages only depend on frameworks, but currently it might sometimes be necessary to pull modules from 3rd-party sources (of course Listaller will
			query the distribution's package database for the module-dependency, before pulling it from somewhere else).
			Administrators may prevent Listaller from fetching modules from 3rd-party sources, so if you package an application, keep in mind that it might not install everywhere if you rely on modules.
		</para>
		<para>
			Frameworks description files should be provided by upstream projects and are stored in <filename>/usr/share/frameworks</filename>. The files describe libraries,
			binaries and other (public) resources provided by this project.
			Think of framework-descriptions as pkg-config files for non-development libraries (and extended to more than just libraries).
		</para>
		<para>
			Listaller ships a set of framework descriptions for common dependencies. As soon as files with the same name are found in the system framework directory,
			these are preferred. Listaller also ships a set of module dependency-description files.
			Module files can be written by the IPK-package creator, and are provided in Listaller packages. The module files shipped with Listaller override modules
			which may be defined in IPK packages.
		</para>
		<para>
			If framework description files are missing, please file a bug at the upstream project providing the framework, or ask the Listaller Project for inclusion.
		</para>
	</section>

	<section id="spec-deptypes-filesystem-location">
		<title>Dependency description locations</title>

		<para>
			Listaller stores the information about possible default dependencies on the filesystem, usually in <filename>/usr/share/listaller/components/</filename>.
			Projects providing frameworks should install them into <filename>/usr/share/frameworks</filename>.
		</para>
		<para>
			In the Listaller-specific directories, the framework dependencies are stored in <filename>frameworks/</filename>, while the module-dependencies are placed
			in <filename>modules/</filename>. The components associated with the framework/module info don't have to be present, since the description files contain
			information how to install them.
		</para>
		<para>
			The modules defined in the system's <filename>modules/</filename> folder override all modules defined in Listaller packages which have the same name. The same applies
			to frameworks, if they are shipped with Listaller packages (included in packages since IPKv2.0).
		</para>
	</section>

	<section id="spec-deptypes-schema">
		<title>Framework file schema</title>
		<para>
			Framework and Module files are simple textfiles with the file extensions <filename>.framework</filename> or <filename>.module</filename>, depending on their type. The file contents
			are similar, but some elements are specific for frameworks or modules, e.g. only modules can have an element of the type <code>Feed</code>.
		</para>
		<para>
			Ideally, upstreams should ship a framework description file, and install it to the shared framework directory.
		</para>
		<para>A Framework file may look like this:</para>
		<programlisting language="Debian Control">
<![CDATA[# The KDE4 base libraries

ID: KDELibs4
Version: shell$ kde4-config --version
 prefix$ "KDE: "
Binaries: kde4-config
 kde-open
ExtraLibSearchPath: %SYS_LIB%/kde4
Libraries: kio_file.so
 libkdeui.so.5
 libsoprano.so.4
 libthreadweaver.so.4
 libsolid.so.4]]>
		</programlisting>
		<para>
			The <code>ID</code> element defines an unique identifier for this component. Framework IDs start with an upper-cased letter, while Modules are lower-cased.
		</para>

		<warning>
			<para>The documentation is not yet complete. You may want to help extending it.</para>
		</warning>
	</section>

	<section id="spec-deptypes-default-frameworks">
		<title>Frameworks</title>
		<para>Currently, the following <emphasis>Framework</emphasis> dependencies are shipped with Listaller by default, and packagers can reference them (the list shows their IDs):</para>

		<variablelist>
			<title>Default frameworks</title>
			<varlistentry>
				<term><literal>Libc6</literal></term>
				<listitem>
					<para>The GNU standard C library.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>Linux</literal></term>
				<listitem>
					<para>Meta-framework, indicating that the software was built for GNU/Linux.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>GLib2</literal></term>
				<listitem>
					<para>The GLib utility library of C routines.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>Xorg</literal></term>
				<listitem>
					<para>The X.org X11 server.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>GNOME3</literal></term>
				<listitem>
					<para>The GNOME-3 platform libraries.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>GTK+3</literal></term>
				<listitem>
					<para>The GTK+3 GUI toolkit libraries.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>KDELibs4</literal></term>
				<listitem>
					<para>The KDE libraries from the KDE project.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term><literal>Mesa</literal></term>
				<listitem>
					<para>The Mesa-3D libraries.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>Python2</literal></term>
				<listitem>
					<para>The Python2 scripting language.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>Python</literal></term>
				<listitem>
					<para>The Python3 scripting language.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>Qt4Core</literal></term>
				<listitem>
					<para>The core libraries of the Qt4 toolkit.</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>PulseAudio</literal></term>
				<listitem>
					<para>The PulseAudio soundserver.</para>
				</listitem>
			</varlistentry>
		</variablelist>
	</section>
</section>
